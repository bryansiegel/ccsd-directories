<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{admin/fragments/head}"></head>
<body>
<div th:insert="~{admin/fragments/header}"></div>
<h1>Create School Directory</h1>
<form th:action="@{/admin/school-directories/create}" th:object="${directory}" method="post">
    <div>
        <label for="schoolName">School Name:</label>
        <input type="text" id="schoolName" th:field="*{schoolName}" required />
    </div>
    <div>
        <label for="schoolAddress">Address:</label>
        <input type="text" id="schoolAddress" th:field="*{schoolAddress}" required />
    </div>
    <div>
        <label for="schoolTelephoneNumber">Telephone:</label>
        <input type="text" id="schoolTelephoneNumber" th:field="*{schoolTelephoneNumber}" required />
    </div>
    <div>
        <label>Assistant Principals:</label>
        <div th:each="assistantPrincipal, iterStat : *{assistantPrincipals}">
            <input type="text" th:field="*{assistantPrincipals[__${iterStat.index}__].name}" placeholder="Assistant Principal Name" />
            <button type="button" th:if="${iterStat.index > 0}" onclick="removeAssistantPrincipal(this)">Remove</button>
        </div>
        <button type="button" onclick="addAssistantPrincipal()">Add Assistant Principal</button>
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
</form>
<script>
    function addAssistantPrincipal() {
        const container = document.querySelector('[th\\:each]');
        const newField = container.cloneNode(true);
        newField.querySelector('input').value = '';
        container.parentNode.appendChild(newField);
    }

    function removeAssistantPrincipal(button) {
        button.parentNode.remove();
    }
</script>
<div th:insert="~{admin/fragments/footer}"></div>
</body>
</html>